task #246: Shift service, fix time search

