diff --git a/tests/src/org/jboss/messaging/tests/integration/core/remoting/ssl/CoreClientOverSSLTest.java b/tests/src/org/jboss/messaging/tests/integration/core/remoting/ssl/CoreClientOverSSLTest.java
index 955c023..debd148 100644
--- a/tests/src/org/jboss/messaging/tests/integration/core/remoting/ssl/CoreClientOverSSLTest.java
+++ b/tests/src/org/jboss/messaging/tests/integration/core/remoting/ssl/CoreClientOverSSLTest.java
@@ -27,4 +27 @@
-import org.jboss.messaging.core.client.ClientConnection;
-import org.jboss.messaging.core.client.ClientConnectionFactory;
-import org.jboss.messaging.core.client.ClientConsumer;
-import org.jboss.messaging.core.client.ClientSession;
+import org.jboss.messaging.core.client.*;
@@ -31,0 +29 @@
+import org.jboss.messaging.core.client.impl.ConnectionParamsImpl;
@@ -131,2 +129,7 @@
-
-      ClientConnectionFactory cf = new ClientConnectionFactoryImpl(config.getLocation());
+      ConnectionParams connectionParams = new ConnectionParamsImpl();
+      connectionParams.setSSLEnabled(true);
+      connectionParams.setKeyStorePath("messaging.keystore");
+      connectionParams.setKeyStorePassword("secureexample");
+      connectionParams.setTrustStorePath("messaging.truststore");
+      connectionParams.setTrustStorePassword("secureexample");
+      ClientConnectionFactory cf = new ClientConnectionFactoryImpl(config.getLocation(), connectionParams);
diff --git a/tests/src/org/jboss/messaging/tests/unit/core/remoting/impl/SessionTestBase.java b/tests/src/org/jboss/messaging/tests/unit/core/remoting/impl/SessionTestBase.java
index a30bbfb..20db2d7 100644
--- a/tests/src/org/jboss/messaging/tests/unit/core/remoting/impl/SessionTestBase.java
+++ b/tests/src/org/jboss/messaging/tests/unit/core/remoting/impl/SessionTestBase.java
@@ -118,0 +119 @@
+      packet.setResponseTargetID(serverPacketHandler.getID());

