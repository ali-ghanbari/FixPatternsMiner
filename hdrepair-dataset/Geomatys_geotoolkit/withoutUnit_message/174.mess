SOS: fix infinite loop in equals

