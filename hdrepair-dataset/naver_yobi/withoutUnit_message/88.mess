hotfix: fix anonymous check logic

- use User#isAnonymous when check a user object is anonymous or not
- add not null constraint on n4user.login_id

