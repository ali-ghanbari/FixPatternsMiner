diff --git a/core/src/main/java/com/orientechnologies/orient/core/metadata/schema/OClassImpl.java b/core/src/main/java/com/orientechnologies/orient/core/metadata/schema/OClassImpl.java
index 2b71664..45fd47c 100755
--- a/core/src/main/java/com/orientechnologies/orient/core/metadata/schema/OClassImpl.java
+++ b/core/src/main/java/com/orientechnologies/orient/core/metadata/schema/OClassImpl.java
@@ -2101 +2101 @@
-    return getDatabase().getStorage() instanceof OAutoshardedStorage
+    return getDatabase().getStorage().getUnderlying() instanceof OAutoshardedStorage

