diff --git a/araqne-logdb/src/main/java/org/araqne/logdb/query/parser/LookupParser.java b/araqne-logdb/src/main/java/org/araqne/logdb/query/parser/LookupParser.java
index 5a9ac7d..cf8958e 100644
--- a/araqne-logdb/src/main/java/org/araqne/logdb/query/parser/LookupParser.java
+++ b/araqne-logdb/src/main/java/org/araqne/logdb/query/parser/LookupParser.java
@@ -58,0 +59,2 @@
+		if (registry != null && registry.getLookupHandler(handlerName) == null)
+			throw new QueryParseException("invalid-lookup-name", -1, handlerName);

