use passed in config instead of default config. This is to fix config inconsistency between newly created client's config and client's provider's config

