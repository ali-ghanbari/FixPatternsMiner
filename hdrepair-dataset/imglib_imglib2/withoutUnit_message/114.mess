fixed overflow in the calculation of getMaxValue()

