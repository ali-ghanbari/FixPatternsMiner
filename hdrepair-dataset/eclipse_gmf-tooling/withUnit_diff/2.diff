diff --git a/tests/org.eclipse.gmf.tests/models/migration/testFeatureLabelModelFacet.gmfgen b/tests/org.eclipse.gmf.tests/models/migration/testFeatureLabelModelFacet.gmfgen
index 614a8fa..14dbeb7 100644
--- a/tests/org.eclipse.gmf.tests/models/migration/testFeatureLabelModelFacet.gmfgen
+++ b/tests/org.eclipse.gmf.tests/models/migration/testFeatureLabelModelFacet.gmfgen
@@ -2 +2 @@
-<xmi:XMI xmi:version="2.0"
+<gmfgen:GenEditorGenerator xmi:version="2.0"
@@ -3,0 +4 @@
+    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
@@ -5,15 +6,31 @@
-  <gmfgen:FeatureLabelModelFacet
-      viewPattern="{0}:{1}"
-      editPattern="{0}:{1}">
-    <metaFeature
-        href="../../../plugin/org.eclipse.emf.ecore/model/Ecore.genmodel#//ecore/ENamedElement/name"/>
-  </gmfgen:FeatureLabelModelFacet>
-  <gmfgen:CompositeFeatureLabelModelFacet
-      viewPattern="{0}:{1}"
-      editPattern="{0}:{1}">
-    <metaFeatures
-        href="../../../plugin/org.eclipse.emf.ecore/model/Ecore.genmodel#//ecore/ENamedElement/name"/>
-    <metaFeatures
-        href="../../../plugin/org.eclipse.emf.ecore/model/Ecore.genmodel#//ecore/EClassifier/defaultValue"/>
-  </gmfgen:CompositeFeatureLabelModelFacet>
-</xmi:XMI>
+  <diagram
+      visualID="1000">
+    <topLevelNodes
+        visualID="2001">
+      <labels
+          xsi:type="gmfgen:GenExternalNodeLabel"
+          visualID="5001">
+        <modelFacet
+            xsi:type="gmfgen:FeatureLabelModelFacet"
+            viewPattern="{0}:{1}"
+            editPattern="{0}:{1}">
+          <metaFeature
+              href="../../../plugin/org.eclipse.emf.ecore/model/Ecore.genmodel#//ecore/ENamedElement/name"/>
+        </modelFacet>
+      </labels>
+      <labels
+          xsi:type="gmfgen:GenExternalNodeLabel"
+          visualID="5002">
+        <modelFacet
+            xsi:type="gmfgen:CompositeFeatureLabelModelFacet"
+            viewPattern="{0}:{1}"
+            editPattern="{0}:{1}">
+          <metaFeatures
+              href="../../../plugin/org.eclipse.emf.ecore/model/Ecore.genmodel#//ecore/ENamedElement/name"/>
+          <metaFeatures
+              href="../../../plugin/org.eclipse.emf.ecore/model/Ecore.genmodel#//ecore/EClassifier/defaultValue"/>
+        </modelFacet>
+      </labels>
+    </topLevelNodes>
+  </diagram>
+</gmfgen:GenEditorGenerator>
diff --git a/tests/org.eclipse.gmf.tests/src/org/eclipse/gmf/tests/migration/AllMigrationTests.java b/tests/org.eclipse.gmf.tests/src/org/eclipse/gmf/tests/migration/AllMigrationTests.java
index 8f1bb18..5eaea05 100644
--- a/tests/org.eclipse.gmf.tests/src/org/eclipse/gmf/tests/migration/AllMigrationTests.java
+++ b/tests/org.eclipse.gmf.tests/src/org/eclipse/gmf/tests/migration/AllMigrationTests.java
@@ -22 +22 @@
-// COMMENTED OUT for M7 BUILD		suite.addTestSuite(MigrationPatchesTest.class);
+		suite.addTestSuite(MigrationPatchesTest.class);
diff --git a/tests/org.eclipse.gmf.tests/src/org/eclipse/gmf/tests/migration/MigrationPatchesTest.java b/tests/org.eclipse.gmf.tests/src/org/eclipse/gmf/tests/migration/MigrationPatchesTest.java
index 8c90418..019c798 100644
--- a/tests/org.eclipse.gmf.tests/src/org/eclipse/gmf/tests/migration/MigrationPatchesTest.java
+++ b/tests/org.eclipse.gmf.tests/src/org/eclipse/gmf/tests/migration/MigrationPatchesTest.java
@@ -39,0 +40 @@
+import org.eclipse.gmf.codegen.gmfgen.GenDiagram;
@@ -41,0 +43,2 @@
+import org.eclipse.gmf.codegen.gmfgen.GenTopLevelNode;
+import org.eclipse.gmf.codegen.gmfgen.LabelModelFacet;
@@ -96 +99,3 @@
-		changeNsUriToOldOne(newGenUri, "gmfgen", "http://www.eclipse.org/gmf/2005/GenModel/2.0");
+		// since we now migrate old (2005) models to build dynamic 2006 model, and saved migrated model
+		// is newest, 2008 one, this approach of reading it with older nsURI becomes confusing
+		// changeNsUriToOldOne(newGenUri, "gmfgen", "http://www.eclipse.org/gmf/2005/GenModel/2.0");
@@ -98 +103,3 @@
-		assertOnLoadModelMigrationDidNothing(newGenUri);
+		// this model should be loaded only with latest-model-aware resource, not the one that is
+		// registered for 2005 nsURI, because 2006 and 2008 models are not compatible
+		assertNoOrdinaryLoadModelProblems(newGenUri);
@@ -196,0 +204,16 @@
+	}
+
+	Resource assertNoOrdinaryLoadModelProblems(URI uri) throws Exception {
+		Resource resource = new ToolingResourceFactory().createResource(uri);
+		ResourceSet rset = new ResourceSetImpl();
+		rset.getResources().add(resource);
+
+		RuntimeException caughtException = null;
+		try {
+			rset.getResource(uri, true);
+		} catch (RuntimeException e) {
+			caughtException = e;
+		}
+		assertFalse("Unexpected model loading problems", //$NON-NLS-1$
+				caughtException != null || !resource.getErrors().isEmpty() || !resource.getWarnings().isEmpty());
+		return resource;
@@ -473,2 +496,12 @@
-		assertEquals(2, resource.getContents().size());
-		Object first = resource.getContents().get(0);
+		assertEquals(1, resource.getContents().size());
+		EObject editorGen = resource.getContents().get(0);
+		assertTrue(editorGen instanceof GenEditorGenerator);
+		assertEquals(1, editorGen.eContents().size());
+		EObject diagram = editorGen.eContents().get(0);
+		assertTrue(diagram instanceof GenDiagram);
+		assertEquals(1, diagram.eContents().size());
+		GenTopLevelNode root = (GenTopLevelNode) diagram.eContents().get(0);
+		assertEquals(2, root.eContents().size());
+		assertEquals(2, root.getLabels().size());
+		//
+		LabelModelFacet first = root.getLabels().get(0).getModelFacet();
@@ -478 +511 @@
-		Object second = resource.getContents().get(1);
+		LabelModelFacet second = root.getLabels().get(1).getModelFacet();
@@ -877,2 +910,2 @@
-		Exception caughtGenException = assertOrdinaryLoadModelProblems(gmfgenFileName);
-		assertTrue("expected diagnostic exception", caughtGenException != null); //$NON-NLS-1$				
+		Resource resource = assertNoOrdinaryLoadModelProblems(gmfgenFileName);
+		assertEquals("http://www.eclipse.org/gmf/2006/GenModel", resource.getContents().get(0).eClass().getEPackage().getNsURI());

