diff --git a/cr/indexer/engine/src/main/java/org/lilyproject/indexer/engine/SolrDocumentBuilder.java b/cr/indexer/engine/src/main/java/org/lilyproject/indexer/engine/SolrDocumentBuilder.java
index 140bcf2..d0be005 100644
--- a/cr/indexer/engine/src/main/java/org/lilyproject/indexer/engine/SolrDocumentBuilder.java
+++ b/cr/indexer/engine/src/main/java/org/lilyproject/indexer/engine/SolrDocumentBuilder.java
@@ -209 +209 @@
-        if (dependency != null && this.indexRecordFilter.getIndexCase(dependency) == null)
+        if (dependency != null && dependency.getId() != null && this.indexRecordFilter.getIndexCase(dependency) == null)

