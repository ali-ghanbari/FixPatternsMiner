diff --git a/backend/manager/modules/bll/src/main/java/org/ovirt/engine/core/bll/UpdateVmDiskCommand.java b/backend/manager/modules/bll/src/main/java/org/ovirt/engine/core/bll/UpdateVmDiskCommand.java
index e0c0bef..bb58b1e 100644
--- a/backend/manager/modules/bll/src/main/java/org/ovirt/engine/core/bll/UpdateVmDiskCommand.java
+++ b/backend/manager/modules/bll/src/main/java/org/ovirt/engine/core/bll/UpdateVmDiskCommand.java
@@ -66 +66 @@
-                        getVmDeviceDao().get(new VmDeviceId(_oldDisk.getId(), getVmId()));
+                        getVmDeviceDao().get(new VmDeviceId(_oldDisk.getDisk().getId(), getVmId()));
diff --git a/backend/manager/modules/bll/src/test/java/org/ovirt/engine/core/bll/UpdateVmDiskCommandTest.java b/backend/manager/modules/bll/src/test/java/org/ovirt/engine/core/bll/UpdateVmDiskCommandTest.java
index 90e7fbd..f36345f 100644
--- a/backend/manager/modules/bll/src/test/java/org/ovirt/engine/core/bll/UpdateVmDiskCommandTest.java
+++ b/backend/manager/modules/bll/src/test/java/org/ovirt/engine/core/bll/UpdateVmDiskCommandTest.java
@@ -13,0 +14 @@
+import org.mockito.Mockito;
@@ -206,2 +207 @@
-        VmDeviceId vmDeviceId = new VmDeviceId(diskImageGuid, command.getParameters().getVmId());
-        vmDevice.setId(vmDeviceId);
+        vmDevice.setId(new VmDeviceId());
@@ -210 +210 @@
-        when(vmDeviceDAO.get(vmDeviceId)).thenReturn(vmDevice);
+        when(vmDeviceDAO.get(Mockito.any(VmDeviceId.class))).thenReturn(vmDevice);
@@ -254,14 +253,0 @@
-        doReturn(diskImageDao).when(command).getDiskImageDao();
-        when(diskImageDao.get(diskImageGuid)).thenReturn(disk);
-        return disk;
-    }
-
-    /**
-     * The following method will create a VirtIO system disk
-     * @return
-     */
-    private DiskImage createVirtIOSystemDisk() {
-        DiskImage disk = new DiskImage();
-        disk.setId(diskImageGuid);
-        disk.setdisk_interface(DiskInterface.VirtIO);
-        disk.setdisk_type(DiskType.System);

