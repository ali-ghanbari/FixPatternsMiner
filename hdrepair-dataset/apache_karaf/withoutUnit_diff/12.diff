diff --git a/shell/console/src/main/java/org/apache/karaf/shell/console/Main.java b/shell/console/src/main/java/org/apache/karaf/shell/console/Main.java
index aa841a4..fba851b 100644
--- a/shell/console/src/main/java/org/apache/karaf/shell/console/Main.java
+++ b/shell/console/src/main/java/org/apache/karaf/shell/console/Main.java
@@ -185 +185 @@
-        Enumeration<URL> urls = cl.getResources("META-INF/services/org/apache/karaf/shell/commands");
+        Enumeration<URL> urls = cl.getResources(getDiscoveryResource());

