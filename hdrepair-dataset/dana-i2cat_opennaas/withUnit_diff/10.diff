diff --git a/extensions/bundles/router.capability.ip/src/main/java/org/opennaas/extensions/router/capability/ip/shell/SetIPv4Command.java b/extensions/bundles/router.capability.ip/src/main/java/org/opennaas/extensions/router/capability/ip/shell/SetIPv4Command.java
index cabb354..cbf76ec 100644
--- a/extensions/bundles/router.capability.ip/src/main/java/org/opennaas/extensions/router/capability/ip/shell/SetIPv4Command.java
+++ b/extensions/bundles/router.capability.ip/src/main/java/org/opennaas/extensions/router/capability/ip/shell/SetIPv4Command.java
@@ -73 +73 @@
-			IPProtocolEndpoint ipProtocolEndpoint = new IPProtocolEndpoint();
+			IPProtocolEndpoint ipProtocolEndpoint = getIPProtocolEndpoint();
diff --git a/itests/router/src/test/java/org/opennaas/itests/router/ip/IPCapabilityIntegrationTest.java b/itests/router/src/test/java/org/opennaas/itests/router/ip/IPCapabilityIntegrationTest.java
index a2b0e7f..cf7c497 100644
--- a/itests/router/src/test/java/org/opennaas/itests/router/ip/IPCapabilityIntegrationTest.java
+++ b/itests/router/src/test/java/org/opennaas/itests/router/ip/IPCapabilityIntegrationTest.java
@@ -171,0 +172 @@
+		ipProtocolEndpoint.setIPv4Address("192.168.0.1/24");

