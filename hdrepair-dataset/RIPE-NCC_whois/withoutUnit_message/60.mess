fix nullpointerexception and optimize updateperformer

