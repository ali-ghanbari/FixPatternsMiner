diff --git a/org.eclipse.jface.text/src/org/eclipse/jface/text/source/AnnotationPainter.java b/org.eclipse.jface.text/src/org/eclipse/jface/text/source/AnnotationPainter.java
index bedc858..d15c2f7 100644
--- a/org.eclipse.jface.text/src/org/eclipse/jface/text/source/AnnotationPainter.java
+++ b/org.eclipse.jface.text/src/org/eclipse/jface/text/source/AnnotationPainter.java
@@ -1102 +1102 @@
-		int vLength= fSourceViewer.getBottomIndexEndOffset() + 1;		
+		int vLength= fSourceViewer.getBottomIndexEndOffset() + 1 - vOffset;		

