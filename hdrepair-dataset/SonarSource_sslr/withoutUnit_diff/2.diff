diff --git a/sslr-toolkit/src/main/java/org/sonar/sslr/internal/toolkit/ToolkitViewImpl.java b/sslr-toolkit/src/main/java/org/sonar/sslr/internal/toolkit/ToolkitViewImpl.java
index af4517b..e9c9aa8 100644
--- a/sslr-toolkit/src/main/java/org/sonar/sslr/internal/toolkit/ToolkitViewImpl.java
+++ b/sslr-toolkit/src/main/java/org/sonar/sslr/internal/toolkit/ToolkitViewImpl.java
@@ -417 +417 @@
-    result = Math.min(offset, getCodeElementEndOffset());
+    result = Math.min(result, getCodeElementEndOffset());

