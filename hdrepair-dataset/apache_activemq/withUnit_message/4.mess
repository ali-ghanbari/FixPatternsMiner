fixing a race on SharedLockFile

