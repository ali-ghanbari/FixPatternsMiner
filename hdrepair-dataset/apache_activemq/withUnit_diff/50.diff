diff --git a/activemq-core/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java b/activemq-core/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java
index dc0d0fb..8568ab6 100755
--- a/activemq-core/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java
+++ b/activemq-core/src/main/java/org/apache/activemq/ActiveMQMessageConsumer.java
@@ -863 +863 @@
-        session.sendAck(ack);
+        session.syncSendPacket(ack);
diff --git a/activemq-core/src/test/java/org/apache/activemq/broker/RedeliveryRestartTest.java b/activemq-core/src/test/java/org/apache/activemq/broker/RedeliveryRestartTest.java
index 0834d38..a1486a0 100644
--- a/activemq-core/src/test/java/org/apache/activemq/broker/RedeliveryRestartTest.java
+++ b/activemq-core/src/test/java/org/apache/activemq/broker/RedeliveryRestartTest.java
@@ -41,0 +42 @@
+        kahaDBPersistenceAdapter.setCleanupInterval(500);

