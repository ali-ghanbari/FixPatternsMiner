diff --git a/activemq-core/src/main/java/org/apache/activemq/security/CachedLDAPAuthorizationMap.java b/activemq-core/src/main/java/org/apache/activemq/security/CachedLDAPAuthorizationMap.java
index 440746d..e2e13da 100644
--- a/activemq-core/src/main/java/org/apache/activemq/security/CachedLDAPAuthorizationMap.java
+++ b/activemq-core/src/main/java/org/apache/activemq/security/CachedLDAPAuthorizationMap.java
@@ -139 +138,0 @@
-
diff --git a/activemq-core/src/test/java/org/apache/activemq/security/AbstractCachedLDAPAuthorizationMapLegacyTest.java b/activemq-core/src/test/java/org/apache/activemq/security/AbstractCachedLDAPAuthorizationMapLegacyTest.java
index aea1320..be65eeb 100755
--- a/activemq-core/src/test/java/org/apache/activemq/security/AbstractCachedLDAPAuthorizationMapLegacyTest.java
+++ b/activemq-core/src/test/java/org/apache/activemq/security/AbstractCachedLDAPAuthorizationMapLegacyTest.java
@@ -289,2 +289 @@
-    public void testRestart(boolean sync) throws Exception {
-        map.query();
+    public void testRestart(final boolean sync) throws Exception {
@@ -294,0 +294 @@
+        map.query();
@@ -308 +308,5 @@
-                return map.context == null;
+                if (sync) {
+                    return !map.isContextAlive();
+                } else {
+                    return map.context == null;
+                }

