diff --git a/src/org/exist/xquery/LocationStep.java b/src/org/exist/xquery/LocationStep.java
index 5a73acc..cb05024 100644
--- a/src/org/exist/xquery/LocationStep.java
+++ b/src/org/exist/xquery/LocationStep.java
@@ -127 +127 @@
-		if (!this.inPredicate && (this.axis == Constants.SELF_AXIS || (parent != null && parent.getSubExpressionCount() == 1)))
+		if (!this.inPredicate && (this.axis == Constants.SELF_AXIS || (parent != null && parent.getSubExpression(0) == this)))

