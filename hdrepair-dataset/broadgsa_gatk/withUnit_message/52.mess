fixed out of date tests.  Also, tests uncovered a subtle bug in new implementation that was also fixed

git-svn-id: file:///humgen/gsa-scr1/gsa-engineering/svn_contents/trunk@2741 348d0f76-0448-11de-a6fe-93d51630548a

