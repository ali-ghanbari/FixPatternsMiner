diff --git a/core/src/main/java/org/infinispan/affinity/KeyAffinityServiceImpl.java b/core/src/main/java/org/infinispan/affinity/KeyAffinityServiceImpl.java
index c2baa32..c1f6bab 100644
--- a/core/src/main/java/org/infinispan/affinity/KeyAffinityServiceImpl.java
+++ b/core/src/main/java/org/infinispan/affinity/KeyAffinityServiceImpl.java
@@ -159 +159 @@
-      ((EmbeddedCacheManager)cache.getCacheManager()).addListener(listenerRegistration);
+      cache.getCacheManager().addListener(listenerRegistration);

