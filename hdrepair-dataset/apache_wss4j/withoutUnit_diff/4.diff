diff --git a/ws-security-dom/src/main/java/org/apache/wss4j/dom/processor/SignatureProcessor.java b/ws-security-dom/src/main/java/org/apache/wss4j/dom/processor/SignatureProcessor.java
index 8f01968..795a7a7 100644
--- a/ws-security-dom/src/main/java/org/apache/wss4j/dom/processor/SignatureProcessor.java
+++ b/ws-security-dom/src/main/java/org/apache/wss4j/dom/processor/SignatureProcessor.java
@@ -767 +767 @@
-                    if (!(parameterSpec instanceof ExcC14NParameterSpec)) {
+                    if (parameterSpec != null && !(parameterSpec instanceof ExcC14NParameterSpec)) {

