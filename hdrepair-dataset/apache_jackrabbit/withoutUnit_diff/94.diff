diff --git a/src/java/org/apache/jackrabbit/core/BLOBFileValue.java b/src/java/org/apache/jackrabbit/core/BLOBFileValue.java
index 9cde631..19b7561 100644
--- a/src/java/org/apache/jackrabbit/core/BLOBFileValue.java
+++ b/src/java/org/apache/jackrabbit/core/BLOBFileValue.java
@@ -203 +203 @@
-                    && buffer.equals(other.buffer));
+                    && (buffer == null ? other.buffer == null : buffer.equals(other.buffer)));

