bug fixes for dcument upload

