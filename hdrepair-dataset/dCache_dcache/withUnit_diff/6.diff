diff --git a/modules/dCache/org/dcache/pool/repository/v5/WriteHandleImpl.java b/modules/dCache/org/dcache/pool/repository/v5/WriteHandleImpl.java
index d9d9e33..0574388 100644
--- a/modules/dCache/org/dcache/pool/repository/v5/WriteHandleImpl.java
+++ b/modules/dCache/org/dcache/pool/repository/v5/WriteHandleImpl.java
@@ -169,0 +170 @@
+                _allocated = length;
diff --git a/modules/dCacheJUnit/org/dcache/tests/repository/RepositorySubsystemTest.java b/modules/dCacheJUnit/org/dcache/tests/repository/RepositorySubsystemTest.java
index c001851..c719dd5 100644
--- a/modules/dCacheJUnit/org/dcache/tests/repository/RepositorySubsystemTest.java
+++ b/modules/dCacheJUnit/org/dcache/tests/repository/RepositorySubsystemTest.java
@@ -466 +465,0 @@
-                              final boolean keep,
@@ -530 +529 @@
-        createEntry4(0, false, false, false, false, FROM_CLIENT, PRECIOUS);
+        createEntry4(0, false, false, false, FROM_CLIENT, PRECIOUS);
@@ -540 +539 @@
-            createEntry4(0, true, false, false, false, FROM_CLIENT, PRECIOUS);
+            createEntry4(100, true, false, false, FROM_CLIENT, PRECIOUS);
@@ -552 +551 @@
-        createEntry4(-100, false, false, false, false, FROM_CLIENT, PRECIOUS);
+        createEntry4(-100, false, false, false, FROM_CLIENT, PRECIOUS);
@@ -562 +561 @@
-        createEntry4(100, false, false, false, false, FROM_CLIENT, PRECIOUS);
+        createEntry4(100, false, false, false, FROM_CLIENT, PRECIOUS);
@@ -572 +571 @@
-        createEntry4(100, false, false, true, true, FROM_CLIENT, PRECIOUS);
+        createEntry4(100, false, false, true, FROM_CLIENT, PRECIOUS);
@@ -592 +591 @@
-        createEntry4(0,false, false, false, false, FROM_CLIENT, PRECIOUS);
+        createEntry4(0,false, false, false, FROM_CLIENT, PRECIOUS);

