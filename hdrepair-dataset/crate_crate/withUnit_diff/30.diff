diff --git a/sql/src/main/java/io/crate/metadata/doc/DocIndexMetaData.java b/sql/src/main/java/io/crate/metadata/doc/DocIndexMetaData.java
index af6eb83..276b654 100644
--- a/sql/src/main/java/io/crate/metadata/doc/DocIndexMetaData.java
+++ b/sql/src/main/java/io/crate/metadata/doc/DocIndexMetaData.java
@@ -148,0 +149 @@
+            builder.add(name);
diff --git a/sql/src/test/java/io/crate/metadata/doc/DocIndexMetaDataTest.java b/sql/src/test/java/io/crate/metadata/doc/DocIndexMetaDataTest.java
index e67b035..0c00e20 100644
--- a/sql/src/test/java/io/crate/metadata/doc/DocIndexMetaDataTest.java
+++ b/sql/src/test/java/io/crate/metadata/doc/DocIndexMetaDataTest.java
@@ -26,4 +26 @@
-import java.util.HashMap;
-import java.util.List;
-import java.util.Map;
-import java.util.TreeMap;
+import java.util.*;
@@ -71,0 +69,31 @@
+    public void testNestedColumnIdent() throws Exception {
+        XContentBuilder builder = XContentFactory.jsonBuilder()
+                .startObject()
+                .startObject("properties")
+                    .startObject("person")
+                        .startObject("properties")
+                            .startObject("addresses")
+                                .startObject("properties")
+                                    .startObject("city")
+                                        .field("type", "string")
+                                        .field("index", "not_analyzed")
+                                    .endObject()
+                                    .startObject("country")
+                                        .field("type", "string")
+                                        .field("index", "not_analyzed")
+                                    .endObject()
+                                .endObject()
+                            .endObject()
+                        .endObject()
+                    .endObject()
+                .endObject()
+                .endObject();
+
+        IndexMetaData metaData = getIndexMetaData("test1", builder);
+        DocIndexMetaData md = newMeta(metaData, "test1");
+
+        ReferenceInfo referenceInfo = md.references().get(new ColumnIdent("person", Arrays.asList("addresses", "city")));
+        assertNotNull(referenceInfo);
+    }
+
+    @Test

