Fix testReportsServiceDownWithKilled (and code tidy)

- key fix was calling oldPersister.waitForWritesComplete
