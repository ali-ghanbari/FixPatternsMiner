change unit test from sleep to a wait loop with timeout
minor toString fix in Device

