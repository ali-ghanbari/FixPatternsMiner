diff --git a/proton-j/src/org/apache/qpid/proton/engine/impl/TransportReceiver.java b/proton-j/src/org/apache/qpid/proton/engine/impl/TransportReceiver.java
index 729ec21..25ff1c3 100644
--- a/proton-j/src/org/apache/qpid/proton/engine/impl/TransportReceiver.java
+++ b/proton-j/src/org/apache/qpid/proton/engine/impl/TransportReceiver.java
@@ -47 +47 @@
-            getLink().setCredit(getRemoteLinkCredit().intValue());
+            getLink().setCredit(getLink().getQueued());

