diff --git a/intermine/web/main/src/org/intermine/web/struts/QueryBuilderChange.java b/intermine/web/main/src/org/intermine/web/struts/QueryBuilderChange.java
index 26ecc7b..b6c8b61 100644
--- a/intermine/web/main/src/org/intermine/web/struts/QueryBuilderChange.java
+++ b/intermine/web/main/src/org/intermine/web/struts/QueryBuilderChange.java
@@ -792 +792 @@
-        if (MainHelper.containsJoin(prefix)) {
+        if (prefix != null && MainHelper.containsJoin(prefix)) {

