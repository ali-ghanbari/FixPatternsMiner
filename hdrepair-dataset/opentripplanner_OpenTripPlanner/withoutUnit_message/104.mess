fix exceptions in itinerary generator (should really use path parser)
