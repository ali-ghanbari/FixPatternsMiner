diff --git a/struts2/plugin/src/com/intellij/struts2/facet/ui/StrutsVersionDetector.java b/struts2/plugin/src/com/intellij/struts2/facet/ui/StrutsVersionDetector.java
index 66e6569..940d7fe 100644
--- a/struts2/plugin/src/com/intellij/struts2/facet/ui/StrutsVersionDetector.java
+++ b/struts2/plugin/src/com/intellij/struts2/facet/ui/StrutsVersionDetector.java
@@ -77 +77 @@
-    return JarFileSystem.getInstance().getJarFile(virtualFile);
+    return JarFileSystem.getInstance().getJarFile(virtualFile).getZipFile();

