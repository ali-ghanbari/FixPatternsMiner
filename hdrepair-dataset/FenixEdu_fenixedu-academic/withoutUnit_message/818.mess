Bug fix - the delete was not working.
Also cleaned up the code a bit.


