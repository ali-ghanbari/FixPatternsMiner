Bug fix: comparing the beginDate with the endDate, when it should be begin with begin


