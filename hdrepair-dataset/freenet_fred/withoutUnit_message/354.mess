Merge sajack/ContentFilter. Some conflicts have been fixed, and a build fix. Further changes will be needed.

