diff --git a/src/freenet/store/saltedhash/SaltedHashFreenetStore.java b/src/freenet/store/saltedhash/SaltedHashFreenetStore.java
index 7004852..599c4dd 100644
--- a/src/freenet/store/saltedhash/SaltedHashFreenetStore.java
+++ b/src/freenet/store/saltedhash/SaltedHashFreenetStore.java
@@ -857,0 +858,2 @@
+				if (bloomFilterK == 0)
+					bloomFilterK = BloomFilter.optimialK(bloomFilterSize, storeSize);

