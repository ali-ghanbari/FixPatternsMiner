diff --git a/src/freenet/node/TextModeClientInterface.java b/src/freenet/node/TextModeClientInterface.java
index 09d4fad..5d091ce 100644
--- a/src/freenet/node/TextModeClientInterface.java
+++ b/src/freenet/node/TextModeClientInterface.java
@@ -190 +190 @@
-        if(core.directTMCI != this) {
+        if(core != null && core.directTMCI != this) {

