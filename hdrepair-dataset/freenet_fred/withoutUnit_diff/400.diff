diff --git a/src/freenet/client/async/ClientRequestSchedulerCore.java b/src/freenet/client/async/ClientRequestSchedulerCore.java
index 9c8b74f..d340e42 100644
--- a/src/freenet/client/async/ClientRequestSchedulerCore.java
+++ b/src/freenet/client/async/ClientRequestSchedulerCore.java
@@ -392 +392 @@
-				if(offeredKeys.hasValidKeys(this, null, context))
+				if(offeredKeys != null && offeredKeys.hasValidKeys(this, null, context))

