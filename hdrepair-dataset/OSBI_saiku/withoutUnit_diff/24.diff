diff --git a/saiku-core/saiku-service/src/main/java/org/saiku/service/olap/totals/TotalsListsBuilder.java b/saiku-core/saiku-service/src/main/java/org/saiku/service/olap/totals/TotalsListsBuilder.java
index 44640bd..09fff54 100644
--- a/saiku-core/saiku-service/src/main/java/org/saiku/service/olap/totals/TotalsListsBuilder.java
+++ b/saiku-core/saiku-service/src/main/java/org/saiku/service/olap/totals/TotalsListsBuilder.java
@@ -134 +134 @@
-			while (i >= 0 && m.getDepth() != levels.get(i));
+			while (i >= 0 && m != null && m.getDepth() != levels.get(i));

