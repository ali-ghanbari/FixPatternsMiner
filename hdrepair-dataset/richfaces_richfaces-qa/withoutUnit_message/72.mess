tests for rich functions fixed

