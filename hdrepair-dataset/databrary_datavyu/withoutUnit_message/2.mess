partially rollback Bug 240 fix 1adeeb bc of bad behavior on mac

