diff --git a/server/src/com/cloud/resource/ResourceManagerImpl.java b/server/src/com/cloud/resource/ResourceManagerImpl.java
index 5723196..430a516 100755
--- a/server/src/com/cloud/resource/ResourceManagerImpl.java
+++ b/server/src/com/cloud/resource/ResourceManagerImpl.java
@@ -2110 +2110 @@
-            if (vm.getHostId() != null && vm.getHostId() == hostId) {
+            if (vm != null && vm.getHostId() != null && vm.getHostId() == hostId) {

