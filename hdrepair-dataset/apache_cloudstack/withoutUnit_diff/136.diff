diff --git a/server/src/com/cloud/vm/UserVmManagerImpl.java b/server/src/com/cloud/vm/UserVmManagerImpl.java
index 05ff6aa..86150a2 100755
--- a/server/src/com/cloud/vm/UserVmManagerImpl.java
+++ b/server/src/com/cloud/vm/UserVmManagerImpl.java
@@ -3231 +3230,0 @@
-            ex.addProxyObject(vm, vmId, "vmId");
diff --git a/test/integration/smoke/test_deploy_vm_with_userdata.py b/test/integration/smoke/test_deploy_vm_with_userdata.py
index 8ca9bd0..260106c 100644
--- a/test/integration/smoke/test_deploy_vm_with_userdata.py
+++ b/test/integration/smoke/test_deploy_vm_with_userdata.py
@@ -108 +108,2 @@
-            domainid=self.account.domainid
+            domainid=self.account.domainid,
+            id=deployVmResponse.id
@@ -114 +114,0 @@
-        self.cleanup.append(deployVmResponse)
@@ -132 +132,2 @@
-            domainid=self.account.domainid
+            domainid=self.account.domainid,
+            id=deployVmResponse.id
@@ -138 +138,0 @@
-        self.cleanup.append(deployVmResponse)

