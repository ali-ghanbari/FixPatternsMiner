diff --git a/src/java/org/lwjgl/opengl/Pbuffer.java b/src/java/org/lwjgl/opengl/Pbuffer.java
index 2f8f009..17f0e8e 100644
--- a/src/java/org/lwjgl/opengl/Pbuffer.java
+++ b/src/java/org/lwjgl/opengl/Pbuffer.java
@@ -178,2 +177,0 @@
-		if ((getCapabilities() & PBUFFER_SUPPORTED) == 0)
-			throw new IllegalStateException("Pbuffers are not supported");
diff --git a/src/native/linux/org_lwjgl_opengl_Pbuffer.c b/src/native/linux/org_lwjgl_opengl_Pbuffer.c
index de3f8fe..eb6a1bf 100644
--- a/src/native/linux/org_lwjgl_opengl_Pbuffer.c
+++ b/src/native/linux/org_lwjgl_opengl_Pbuffer.c
@@ -53,0 +54,5 @@
+static bool isPbuffersSupported() {
+	// Only support the GLX 1.3 Pbuffers and ignore the GLX_SGIX_pbuffer extension
+	return extgl_Extensions.GLX13 ? org_lwjgl_opengl_Pbuffer_PBUFFER_SUPPORTED : 0;
+}
+
@@ -57,2 +62 @@
-	// Only support the GLX 1.3 Pbuffers and ignore the GLX_SGIX_pbuffer extension
-	return extgl_Extensions.GLX13 ? org_lwjgl_opengl_Pbuffer_PBUFFER_SUPPORTED : 0;
+	return isPbuffersSupported() ? org_lwjgl_opengl_Pbuffer_PBUFFER_SUPPORTED : 0;
@@ -130 +134 @@
-	if (!extgl_InitGLX(env, disp, current_screen)) {
+	if (!extgl_InitGLX(env, disp, current_screen) || !isPbuffersSupported()) {
@@ -132 +136 @@
-		throwException(env, "Could not init GLX");
+		throwException(env, "No Pbuffer support");
diff --git a/src/native/win32/org_lwjgl_opengl_Pbuffer.c b/src/native/win32/org_lwjgl_opengl_Pbuffer.c
index 48523db..d08b237 100644
--- a/src/native/win32/org_lwjgl_opengl_Pbuffer.c
+++ b/src/native/win32/org_lwjgl_opengl_Pbuffer.c
@@ -57,0 +58,4 @@
+static bool isPbuffersSupported() {
+	return extgl_Extensions.WGL_ARB_pixel_format && extgl_Extensions.WGL_ARB_pbuffer;
+}
+
@@ -62 +66 @@
-	if ( extgl_Extensions.WGL_ARB_pixel_format && extgl_Extensions.WGL_ARB_pbuffer )
+	if (isPbuffersSupported())
@@ -65 +69 @@
-	if ( extgl_Extensions.WGL_ARB_render_texture )
+	if (extgl_Extensions.WGL_ARB_render_texture)
@@ -68 +72 @@
-	if ( extgl_Extensions.WGL_NV_render_texture_rectangle )
+	if (extgl_Extensions.WGL_NV_render_texture_rectangle)
@@ -71 +75 @@
-	if ( extgl_Extensions.WGL_NV_render_depth_texture )
+	if (extgl_Extensions.WGL_NV_render_depth_texture)
@@ -113 +117 @@
-
+	bool pbuffers_supported = isPbuffersSupported();
@@ -117,0 +122,5 @@
+	if (!pbuffers_supported) {
+		closeWindow(dummy_hwnd, dummy_hdc);
+		throwException(env, "No Pbuffer support.");
+		return NULL;
+	}
@@ -123 +132 @@
-        Pbuffer = wglCreatePbufferARB(dummy_hdc, iPixelFormat, width, height, pBufferAttribs_ptr);
+	Pbuffer = wglCreatePbufferARB(dummy_hdc, iPixelFormat, width, height, pBufferAttribs_ptr);

