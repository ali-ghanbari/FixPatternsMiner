diff --git a/features/org.eclipse.xtend.sdk.feature/feature.xml b/features/org.eclipse.xtend.sdk.feature/feature.xml
index e6fb826..d284d9c 100644
--- a/features/org.eclipse.xtend.sdk.feature/feature.xml
+++ b/features/org.eclipse.xtend.sdk.feature/feature.xml
@@ -31,0 +32,7 @@
+   <requires>
+      <import plugin="com.google.guava"/>
+      <import plugin="com.google.guava.source"/>
+      <import plugin="org.apache.commons.lang"/>
+      <import plugin="org.apache.commons.lang.source"/>
+   </requires>
+
@@ -123,28 +129,0 @@
-   <plugin
-         id="com.google.guava"
-         download-size="0"
-         install-size="0"
-         version="0.0.0"
-         unpack="false"/>
-
-   <plugin
-         id="com.google.guava.source"
-         download-size="0"
-         install-size="0"
-         version="0.0.0"
-         unpack="false"/>
-
-   <plugin
-         id="org.apache.commons.lang"
-         download-size="0"
-         install-size="0"
-         version="0.0.0"
-         unpack="false"/>
-<!-- temporary disabled due to bogus bundle versions from orbit
-   <plugin
-         id="org.apache.commons.lang.source"
-         download-size="0"
-         install-size="0"
-         version="0.0.0"
-         unpack="false"/>
--->
diff --git a/features/org.eclipse.xtext.build.feature/category.xml.template b/features/org.eclipse.xtext.build.feature/category.xml.template
index 238b006..9debc41 100644
--- a/features/org.eclipse.xtext.build.feature/category.xml.template
+++ b/features/org.eclipse.xtext.build.feature/category.xml.template
@@ -20,0 +21,3 @@
+   <feature id="org.eclipse.xtext.license" version="0.0.0">
+      <category name="xtext"/>
+   </feature>
@@ -32,0 +36,3 @@
+   <feature id="org.eclipse.xtext.gwt" version="0.0.0">
+      <category name="gwt-related"/>
+   </feature>
diff --git a/features/org.eclipse.xtext.build.feature/feature.xml b/features/org.eclipse.xtext.build.feature/feature.xml
index bb261e3..50f8567 100644
--- a/features/org.eclipse.xtext.build.feature/feature.xml
+++ b/features/org.eclipse.xtext.build.feature/feature.xml
@@ -47,0 +48,59 @@
+  
+   <plugin
+         id="com.google.guava"
+         download-size="0"
+         install-size="0"
+         version="0.0.0"
+         unpack="false"/>
+
+   <plugin
+         id="javax.inject"
+         download-size="0"
+         install-size="0"
+         version="0.0.0"
+         unpack="false"/>
+
+   <plugin
+         id="com.google.inject"
+         download-size="0"
+         install-size="0"
+         version="0.0.0"
+         unpack="false"/>
+
+   <plugin
+         id="org.objectweb.asm"
+         download-size="0"
+         install-size="0"
+         version="0.0.0"
+         unpack="false"/>
+ 
+   <plugin
+         id="com.google.inject.source"
+         download-size="0"
+         install-size="0"
+         version="0.0.0"
+         unpack="false"/>
+
+   <plugin
+         id="org.objectweb.asm.source"
+         download-size="0"
+         install-size="0"
+         version="0.0.0"
+         unpack="false"/>
+ 
+
+   <plugin
+         id="javax.inject.source"
+         download-size="0"
+         install-size="0"
+         version="0.0.0"
+         unpack="false"/>
+
+
+   <plugin
+         id="com.google.guava.source"
+         download-size="0"
+         install-size="0"
+         version="0.0.0"
+         unpack="false"/>
+
diff --git a/features/org.eclipse.xtext.redist.feature/feature.xml b/features/org.eclipse.xtext.redist.feature/feature.xml
index b6346ce..e513feb 100644
--- a/features/org.eclipse.xtext.redist.feature/feature.xml
+++ b/features/org.eclipse.xtext.redist.feature/feature.xml
@@ -5 +5 @@
-     version="2.6.0.qualifier"
+      version="2.6.0.qualifier"
@@ -22,0 +23,6 @@
+   <requires>
+      <import plugin="com.google.guava" version="10.0.1"/>
+      <import plugin="com.google.inject" version="3.0.0" match="greaterOrEqual"/>
+      <import plugin="org.objectweb.asm" version="5.0.1" match="compatible"/>
+      <import plugin="javax.inject" version="1.0.0" match="greaterOrEqual"/>
+   </requires>
@@ -161,28 +166,0 @@
-         download-size="0"
-         install-size="0"
-         version="0.0.0"
-         unpack="false"/>
-
-   <plugin
-         id="com.google.guava"
-         download-size="0"
-         install-size="0"
-         version="0.0.0"
-         unpack="false"/>
-
-   <plugin
-         id="javax.inject"
-         download-size="0"
-         install-size="0"
-         version="0.0.0"
-         unpack="false"/>
-
-   <plugin
-         id="com.google.inject"
-         download-size="0"
-         install-size="0"
-         version="0.0.0"
-         unpack="false"/>
-
-   <plugin
-         id="org.objectweb.asm"
diff --git a/features/org.eclipse.xtext.runtime.feature/feature.xml b/features/org.eclipse.xtext.runtime.feature/feature.xml
index 17956e0..89de9b4 100644
--- a/features/org.eclipse.xtext.runtime.feature/feature.xml
+++ b/features/org.eclipse.xtext.runtime.feature/feature.xml
@@ -26,0 +27,4 @@
+      <import plugin="com.google.guava" version="10.0.1"/>
+      <import plugin="javax.inject" version="1.0.0" match="greaterOrEqual"/>
+      <import plugin="com.google.inject" version="3.0.0" match="greaterOrEqual"/>
+      <import plugin="org.objectweb.asm" version="5.0.1" match="compatible"/>
@@ -95,28 +98,0 @@
-         download-size="0"
-         install-size="0"
-         version="0.0.0"
-         unpack="false"/>
-
-   <plugin
-         id="com.google.guava"
-         download-size="0"
-         install-size="0"
-         version="0.0.0"
-         unpack="false"/>
-
-   <plugin
-         id="javax.inject"
-         download-size="0"
-         install-size="0"
-         version="0.0.0"
-         unpack="false"/>
-
-   <plugin
-         id="com.google.inject"
-         download-size="0"
-         install-size="0"
-         version="0.0.0"
-         unpack="false"/>
-
-   <plugin
-         id="org.objectweb.asm"
diff --git a/plugins/org.eclipse.xtext.builder/.settings/.api_filters b/plugins/org.eclipse.xtext.builder/.settings/.api_filters
index 75d7446..0b3643a 100644
--- a/plugins/org.eclipse.xtext.builder/.settings/.api_filters
+++ b/plugins/org.eclipse.xtext.builder/.settings/.api_filters
@@ -2,0 +3,32 @@
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.base.Equivalences">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.base.Equivalences"/>
+                <message_argument value="org.eclipse.xtext.builder_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.AbstractLinkedIterator">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.AbstractLinkedIterator"/>
+                <message_argument value="org.eclipse.xtext.builder_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.AsynchronousComputationException">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.AsynchronousComputationException"/>
+                <message_argument value="org.eclipse.xtext.builder_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.DiscreteDomains">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.DiscreteDomains"/>
+                <message_argument value="org.eclipse.xtext.builder_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
@@ -30,0 +63,8 @@
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.Ranges">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.Ranges"/>
+                <message_argument value="org.eclipse.xtext.builder_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
@@ -44,0 +85,16 @@
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.io.LimitInputStream">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.io.LimitInputStream"/>
+                <message_argument value="org.eclipse.xtext.builder_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.io.NullOutputStream">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.io.NullOutputStream"/>
+                <message_argument value="org.eclipse.xtext.builder_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
diff --git a/plugins/org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/containers/WorkspaceProjectsStateHelper.java b/plugins/org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/containers/WorkspaceProjectsStateHelper.java
index 70ca91f..24c1f4f 100644
--- a/plugins/org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/containers/WorkspaceProjectsStateHelper.java
+++ b/plugins/org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/containers/WorkspaceProjectsStateHelper.java
@@ -96 +96 @@
-		return p != null && XtextProjectHelper.hasNature(p) && XtextProjectHelper.hasNature(p);
+		return p != null && XtextProjectHelper.hasNature(p);
diff --git a/plugins/org.eclipse.xtext.util/.settings/.api_filters b/plugins/org.eclipse.xtext.util/.settings/.api_filters
index 04ae251..43d8211 100644
--- a/plugins/org.eclipse.xtext.util/.settings/.api_filters
+++ b/plugins/org.eclipse.xtext.util/.settings/.api_filters
@@ -2,0 +3,32 @@
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.base.Equivalences">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.base.Equivalences"/>
+                <message_argument value="org.eclipse.xtext.util_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.AbstractLinkedIterator">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.AbstractLinkedIterator"/>
+                <message_argument value="org.eclipse.xtext.util_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.AsynchronousComputationException">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.AsynchronousComputationException"/>
+                <message_argument value="org.eclipse.xtext.util_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.DiscreteDomains">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.DiscreteDomains"/>
+                <message_argument value="org.eclipse.xtext.util_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
@@ -30,0 +63,8 @@
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.Ranges">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.Ranges"/>
+                <message_argument value="org.eclipse.xtext.util_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
@@ -44,0 +85,16 @@
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.io.LimitInputStream">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.io.LimitInputStream"/>
+                <message_argument value="org.eclipse.xtext.util_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.io.NullOutputStream">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.io.NullOutputStream"/>
+                <message_argument value="org.eclipse.xtext.util_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
diff --git a/plugins/org.eclipse.xtext.xbase.junit/.settings/.api_filters b/plugins/org.eclipse.xtext.xbase.junit/.settings/.api_filters
index 9706495..59b54ea 100644
--- a/plugins/org.eclipse.xtext.xbase.junit/.settings/.api_filters
+++ b/plugins/org.eclipse.xtext.xbase.junit/.settings/.api_filters
@@ -16,0 +17,32 @@
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.base.Equivalences">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.base.Equivalences"/>
+                <message_argument value="org.eclipse.xtext.xbase.junit_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.AbstractLinkedIterator">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.AbstractLinkedIterator"/>
+                <message_argument value="org.eclipse.xtext.xbase.junit_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.AsynchronousComputationException">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.AsynchronousComputationException"/>
+                <message_argument value="org.eclipse.xtext.xbase.junit_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.DiscreteDomains">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.DiscreteDomains"/>
+                <message_argument value="org.eclipse.xtext.xbase.junit_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
@@ -44,0 +77,8 @@
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.Ranges">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.Ranges"/>
+                <message_argument value="org.eclipse.xtext.xbase.junit_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
@@ -58,0 +99,16 @@
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.io.LimitInputStream">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.io.LimitInputStream"/>
+                <message_argument value="org.eclipse.xtext.xbase.junit_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.io.NullOutputStream">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.io.NullOutputStream"/>
+                <message_argument value="org.eclipse.xtext.xbase.junit_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
diff --git a/plugins/org.eclipse.xtext.xbase.lib/.settings/.api_filters b/plugins/org.eclipse.xtext.xbase.lib/.settings/.api_filters
index a1046da..6fb341e 100644
--- a/plugins/org.eclipse.xtext.xbase.lib/.settings/.api_filters
+++ b/plugins/org.eclipse.xtext.xbase.lib/.settings/.api_filters
@@ -2,0 +3,32 @@
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.base.Equivalences">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.base.Equivalences"/>
+                <message_argument value="org.eclipse.xtext.xbase.lib_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.AbstractLinkedIterator">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.AbstractLinkedIterator"/>
+                <message_argument value="org.eclipse.xtext.xbase.lib_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.AsynchronousComputationException">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.AsynchronousComputationException"/>
+                <message_argument value="org.eclipse.xtext.xbase.lib_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.DiscreteDomains">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.DiscreteDomains"/>
+                <message_argument value="org.eclipse.xtext.xbase.lib_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
@@ -30,0 +63,8 @@
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.collect.Ranges">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.collect.Ranges"/>
+                <message_argument value="org.eclipse.xtext.xbase.lib_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
@@ -44,0 +85,16 @@
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.io.LimitInputStream">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.io.LimitInputStream"/>
+                <message_argument value="org.eclipse.xtext.xbase.lib_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
+    <resource path="META-INF/MANIFEST.MF" type="com.google.common.io.NullOutputStream">
+        <filter comment="Guava 15" id="305422471">
+            <message_arguments>
+                <message_argument value="com.google.common.io.NullOutputStream"/>
+                <message_argument value="org.eclipse.xtext.xbase.lib_2.5.3"/>
+            </message_arguments>
+        </filter>
+    </resource>
diff --git a/releng/org.eclipse.xtext.releng/releng/ant/xtext-build.ant b/releng/org.eclipse.xtext.releng/releng/ant/xtext-build.ant
index 5ab5d56..ecb1c48 100644
--- a/releng/org.eclipse.xtext.releng/releng/ant/xtext-build.ant
+++ b/releng/org.eclipse.xtext.releng/releng/ant/xtext-build.ant
@@ -36 +35,0 @@
-
@@ -38 +36,0 @@
-
@@ -42 +39,0 @@
-
diff --git a/releng/org.eclipse.xtext.releng/releng/xtext-platform.cquery b/releng/org.eclipse.xtext.releng/releng/xtext-platform.cquery
index 2a7337d..4e5dc62 100644
--- a/releng/org.eclipse.xtext.releng/releng/xtext-platform.cquery
+++ b/releng/org.eclipse.xtext.releng/releng/xtext-platform.cquery
@@ -8,2 +7,0 @@
-    <cq:advisorNode namePattern="com.google.guava" filter="(ECLIPSE.TARGET.ALIAS=Latest)" componentType="osgi.bundle" useTargetPlatform="false" versionOverride="14.9"/>
-    <cq:advisorNode namePattern="com.google.guava" filter="(!(ECLIPSE.TARGET.ALIAS=Latest))" componentType="osgi.bundle" useTargetPlatform="false" versionOverride="[10.0.1,11.0.0)"/>
diff --git a/tests/org.eclipse.xtend.core.tests/src/org/eclipse/xtend/core/tests/compiler/AnonymousClassCompilerTest.xtend b/tests/org.eclipse.xtend.core.tests/src/org/eclipse/xtend/core/tests/compiler/AnonymousClassCompilerTest.xtend
index 688e101..2ab84f3 100644
--- a/tests/org.eclipse.xtend.core.tests/src/org/eclipse/xtend/core/tests/compiler/AnonymousClassCompilerTest.xtend
+++ b/tests/org.eclipse.xtend.core.tests/src/org/eclipse/xtend/core/tests/compiler/AnonymousClassCompilerTest.xtend
@@ -811,0 +812,32 @@
+	@Test
+	def void testGeneric7() {'''
+			class Foo<T>  {
+				def <W extends Foo<W>> foo() {
+					val bar = new Bar<W>() {
+						override bar() {
+							null
+						}
+					}
+				}
+				interface Bar<V extends Foo<V>> {
+					def V bar()
+				}
+			}
+		'''.assertCompilesTo('''
+			@SuppressWarnings("all")
+			public class Foo<T extends Object> {
+			  @SuppressWarnings("all")
+			  public interface Bar<V extends Foo<V>> {
+			    public abstract V bar();
+			  }
+			  
+			  public <W extends Foo<W>> void foo() {
+			    final Foo.Bar<W> bar = new Foo.Bar<W>() {
+			      public W bar() {
+			        return null;
+			      }
+			    };
+			  }
+			}
+		''')
+	}
diff --git a/tests/org.eclipse.xtend.core.tests/xtend-gen/org/eclipse/xtend/core/tests/compiler/AnonymousClassCompilerTest.java b/tests/org.eclipse.xtend.core.tests/xtend-gen/org/eclipse/xtend/core/tests/compiler/AnonymousClassCompilerTest.java
index ef5759c..7a6e8aa 100644
--- a/tests/org.eclipse.xtend.core.tests/xtend-gen/org/eclipse/xtend/core/tests/compiler/AnonymousClassCompilerTest.java
+++ b/tests/org.eclipse.xtend.core.tests/xtend-gen/org/eclipse/xtend/core/tests/compiler/AnonymousClassCompilerTest.java
@@ -1878,0 +1879,82 @@
+  
+  @Test
+  public void testGeneric7() {
+    StringConcatenation _builder = new StringConcatenation();
+    _builder.append("class Foo<T>  {");
+    _builder.newLine();
+    _builder.append("\t");
+    _builder.append("def <W extends Foo<W>> foo() {");
+    _builder.newLine();
+    _builder.append("\t\t");
+    _builder.append("val bar = new Bar<W>() {");
+    _builder.newLine();
+    _builder.append("\t\t\t");
+    _builder.append("override bar() {");
+    _builder.newLine();
+    _builder.append("\t\t\t\t");
+    _builder.append("null");
+    _builder.newLine();
+    _builder.append("\t\t\t");
+    _builder.append("}");
+    _builder.newLine();
+    _builder.append("\t\t");
+    _builder.append("}");
+    _builder.newLine();
+    _builder.append("\t");
+    _builder.append("}");
+    _builder.newLine();
+    _builder.append("\t");
+    _builder.append("interface Bar<V extends Foo<V>> {");
+    _builder.newLine();
+    _builder.append("\t\t");
+    _builder.append("def V bar()");
+    _builder.newLine();
+    _builder.append("\t");
+    _builder.append("}");
+    _builder.newLine();
+    _builder.append("}");
+    _builder.newLine();
+    StringConcatenation _builder_1 = new StringConcatenation();
+    _builder_1.append("@SuppressWarnings(\"all\")");
+    _builder_1.newLine();
+    _builder_1.append("public class Foo<T extends Object> {");
+    _builder_1.newLine();
+    _builder_1.append("  ");
+    _builder_1.append("@SuppressWarnings(\"all\")");
+    _builder_1.newLine();
+    _builder_1.append("  ");
+    _builder_1.append("public interface Bar<V extends Foo<V>> {");
+    _builder_1.newLine();
+    _builder_1.append("    ");
+    _builder_1.append("public abstract V bar();");
+    _builder_1.newLine();
+    _builder_1.append("  ");
+    _builder_1.append("}");
+    _builder_1.newLine();
+    _builder_1.append("  ");
+    _builder_1.newLine();
+    _builder_1.append("  ");
+    _builder_1.append("public <W extends Foo<W>> void foo() {");
+    _builder_1.newLine();
+    _builder_1.append("    ");
+    _builder_1.append("final Foo.Bar<W> bar = new Foo.Bar<W>() {");
+    _builder_1.newLine();
+    _builder_1.append("      ");
+    _builder_1.append("public W bar() {");
+    _builder_1.newLine();
+    _builder_1.append("        ");
+    _builder_1.append("return null;");
+    _builder_1.newLine();
+    _builder_1.append("      ");
+    _builder_1.append("}");
+    _builder_1.newLine();
+    _builder_1.append("    ");
+    _builder_1.append("};");
+    _builder_1.newLine();
+    _builder_1.append("  ");
+    _builder_1.append("}");
+    _builder_1.newLine();
+    _builder_1.append("}");
+    _builder_1.newLine();
+    this.assertCompilesTo(_builder, _builder_1);
+  }

