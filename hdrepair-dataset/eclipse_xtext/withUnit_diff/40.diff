diff --git a/plugins/org.eclipse.xtend.core/src/org/eclipse/xtend/core/compiler/XtendCompiler.java b/plugins/org.eclipse.xtend.core/src/org/eclipse/xtend/core/compiler/XtendCompiler.java
index 744b862..f4657df 100644
--- a/plugins/org.eclipse.xtend.core/src/org/eclipse/xtend/core/compiler/XtendCompiler.java
+++ b/plugins/org.eclipse.xtend.core/src/org/eclipse/xtend/core/compiler/XtendCompiler.java
@@ -191 +191 @@
-			if (forLoop.getAfter() != null || forLoop.getSeparator() != null || forLoop.getAfter() != null) {
+			if (forLoop.getBefore() != null || forLoop.getSeparator() != null || forLoop.getAfter() != null) {
diff --git a/tests/org.eclipse.xtend.core.tests/src/org/eclipse/xtend/core/tests/richstring/AbstractRichStringEvaluationTest.java b/tests/org.eclipse.xtend.core.tests/src/org/eclipse/xtend/core/tests/richstring/AbstractRichStringEvaluationTest.java
index ed29c84..f172fb3 100644
--- a/tests/org.eclipse.xtend.core.tests/src/org/eclipse/xtend/core/tests/richstring/AbstractRichStringEvaluationTest.java
+++ b/tests/org.eclipse.xtend.core.tests/src/org/eclipse/xtend/core/tests/richstring/AbstractRichStringEvaluationTest.java
@@ -646,0 +647,16 @@
+	@Test public void testBug_365632() throws Exception {
+		assertOutput("before\n", 
+				"'''\n"+
+				"  �FOR s : '1'.toCharArray BEFORE 'before'�\n" + 
+				"  �ENDFOR�\n" + 
+				"\n'''");
+	}
+	
+	@Test public void testBug_365632_02() throws Exception {
+		assertOutput("after\n", 
+				"'''\n"+
+						"  �FOR s : '1'.toCharArray AFTER 'after'�\n" + 
+						"  �ENDFOR�\n" + 
+				"\n'''");
+	}
+	

