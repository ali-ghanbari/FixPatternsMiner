fix small bug that caused ClassCastExceptions

