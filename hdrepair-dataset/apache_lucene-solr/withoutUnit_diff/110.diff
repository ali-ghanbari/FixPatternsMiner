diff --git a/solr/core/src/java/org/apache/solr/analytics/request/AnalyticsRequestFactory.java b/solr/core/src/java/org/apache/solr/analytics/request/AnalyticsRequestFactory.java
index 1c8142a..62fa734 100644
--- a/solr/core/src/java/org/apache/solr/analytics/request/AnalyticsRequestFactory.java
+++ b/solr/core/src/java/org/apache/solr/analytics/request/AnalyticsRequestFactory.java
@@ -298 +298 @@
-      if (qfr.getDependencies().remove(queryFacet)) {
+      if (qfr.getDependencies().remove(queryFacet.getName())) {

