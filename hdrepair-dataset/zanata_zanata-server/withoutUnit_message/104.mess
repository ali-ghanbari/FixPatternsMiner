fix logic in extension validation

