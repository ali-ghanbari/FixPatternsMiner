diff --git a/src/org/petitparser/parser/CompositeParser.java b/src/org/petitparser/parser/CompositeParser.java
index 54f56b9..24ac118 100644
--- a/src/org/petitparser/parser/CompositeParser.java
+++ b/src/org/petitparser/parser/CompositeParser.java
@@ -109,0 +110 @@
+    checkState(defined.containsKey(name), "Undefined production: ", name);

