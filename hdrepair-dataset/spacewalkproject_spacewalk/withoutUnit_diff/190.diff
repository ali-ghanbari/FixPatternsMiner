diff --git a/java/code/src/com/redhat/rhn/common/db/datasource/xml/Package_queries.xml b/java/code/src/com/redhat/rhn/common/db/datasource/xml/Package_queries.xml
index 2e60759..6705862 100644
--- a/java/code/src/com/redhat/rhn/common/db/datasource/xml/Package_queries.xml
+++ b/java/code/src/com/redhat/rhn/common/db/datasource/xml/Package_queries.xml
@@ -181 +181 @@
-  <query params="set_label">
+  <query params="set_label, uid">
@@ -186,0 +187 @@
+                   AND S.user_id = :uid
@@ -1462,3 +1463,3 @@
-  <query params="set_label">
-    INSERT INTO rhnPackageFileDeleteQueue (path, created)
-      (SELECT p.path, current_timestamp
+  <query params="set_label, uid">
+    INSERT INTO rhnPackageFileDeleteQueue (path)
+      (SELECT distinct(p.path)
@@ -1467,0 +1469,3 @@
+          AND S.user_id = :uid
+          AND not exists
+          (select path from rhnPackageFileDeleteQueue Q where Q.path = p.path)
@@ -1475 +1479 @@
-   <query params="set_label">
+   <query params="set_label, uid">
@@ -1480,0 +1485 @@
+                       AND S.user_id = :uid
@@ -1784 +1789 @@
-  <query params="set_label">
+  <query params="set_label, uid">
@@ -1789 +1794,2 @@
-                  WHERE s.label = :set_label)
+                  WHERE s.label = :set_label
+                     AND S.user_id = :uid)
@@ -1795 +1801 @@
-  <query params="set_label">
+  <query params="set_label, uid">
@@ -1800 +1806,2 @@
-                  WHERE s.label = :set_label)
+                  WHERE s.label = :set_label
+                     AND S.user_id = :uid)
@@ -1806 +1813 @@
-  <query params="set_label">
+  <query params="set_label, uid">
@@ -1811 +1818,2 @@
-                  WHERE s.label = :set_label)
+                  WHERE s.label = :set_label
+                     AND S.user_id = :uid)
@@ -1875 +1883 @@
-   <query params="set_label">
+   <query params="set_label, uid">
@@ -1881,0 +1890 @@
+                AND S.user_id = :uid
@@ -1890 +1899 @@
-   <query params="set_label">
+   <query params="set_label, uid">
@@ -1894,0 +1904 @@
+         AND S.user_id = :uid
diff --git a/java/code/src/com/redhat/rhn/manager/rhnpackage/PackageManager.java b/java/code/src/com/redhat/rhn/manager/rhnpackage/PackageManager.java
index ed72ab3..8c99b4f 100644
--- a/java/code/src/com/redhat/rhn/manager/rhnpackage/PackageManager.java
+++ b/java/code/src/com/redhat/rhn/manager/rhnpackage/PackageManager.java
@@ -1161,0 +1162 @@
+        params.put("uid", user.getId());

