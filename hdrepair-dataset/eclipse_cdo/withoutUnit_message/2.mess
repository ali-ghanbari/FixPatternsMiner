Improve setup related models; fix PreferenceRecorder
