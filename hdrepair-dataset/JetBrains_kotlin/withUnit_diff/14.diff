diff --git a/idea/src/org/jetbrains/jet/plugin/formatter/JetFormattingModelBuilder.java b/idea/src/org/jetbrains/jet/plugin/formatter/JetFormattingModelBuilder.java
index b254adf..aa740e1 100644
--- a/idea/src/org/jetbrains/jet/plugin/formatter/JetFormattingModelBuilder.java
+++ b/idea/src/org/jetbrains/jet/plugin/formatter/JetFormattingModelBuilder.java
@@ -115,0 +116,2 @@
+
+                .betweenInside(REFERENCE_EXPRESSION, FUNCTION_LITERAL_EXPRESSION, CALL_EXPRESSION).spaces(1)
diff --git a/idea/testData/formatter/ReferenceExpressionFunctionLiteral.kt b/idea/testData/formatter/ReferenceExpressionFunctionLiteral.kt
new file mode 100644
index 0000000..226ba86
--- /dev/null
+++ b/idea/testData/formatter/ReferenceExpressionFunctionLiteral.kt
@@ -0,0 +1,3 @@
+fun f() {
+    array(1, 2, 3).map{ v -> v }
+}
\ No newline at end of file
diff --git a/idea/testData/formatter/ReferenceExpressionFunctionLiteral_after.kt b/idea/testData/formatter/ReferenceExpressionFunctionLiteral_after.kt
new file mode 100644
index 0000000..6cc8094
--- /dev/null
+++ b/idea/testData/formatter/ReferenceExpressionFunctionLiteral_after.kt
@@ -0,0 +1,3 @@
+fun f() {
+    array(1, 2, 3).map { v -> v }
+}
\ No newline at end of file
diff --git a/idea/tests/org/jetbrains/jet/formatter/JetFormatterTest.java b/idea/tests/org/jetbrains/jet/formatter/JetFormatterTest.java
index 860bf04..2cee0d2 100644
--- a/idea/tests/org/jetbrains/jet/formatter/JetFormatterTest.java
+++ b/idea/tests/org/jetbrains/jet/formatter/JetFormatterTest.java
@@ -149,0 +150,4 @@
+    public void testReferenceExpressionFunctionLiteral() throws Exception {
+        doTest();
+    }
+

