diff --git a/compiler/backend/src/org/jetbrains/jet/codegen/ExpressionCodegen.java b/compiler/backend/src/org/jetbrains/jet/codegen/ExpressionCodegen.java
index 9eef892..c9374b6 100644
--- a/compiler/backend/src/org/jetbrains/jet/codegen/ExpressionCodegen.java
+++ b/compiler/backend/src/org/jetbrains/jet/codegen/ExpressionCodegen.java
@@ -2202 +2202 @@
-                for (TypeParameterDescriptor typeParameterDescriptor : getterDescriptor.getTypeParameters()) {
+                for (TypeParameterDescriptor typeParameterDescriptor : resolvedGetCall.getCandidateDescriptor().getTypeParameters()) {
diff --git a/compiler/testData/codegen/regressions/kt796_797.jet b/compiler/testData/codegen/regressions/kt796_797.jet
new file mode 100644
index 0000000..03ae120
--- /dev/null
+++ b/compiler/testData/codegen/regressions/kt796_797.jet
@@ -0,0 +1,8 @@
+fun <T> Array<T>?.get(i : Int?) = this.sure().get(i.sure())
+fun <T> array(vararg t : T) : Array<T> = t
+
+fun box() : String {
+    val a : Array<String>? = array<String>("Str", "Str2")
+    val i : Int? = 1
+    return if(a[i] == "Str2") "OK" else "fail"
+}
\ No newline at end of file
diff --git a/compiler/tests/org/jetbrains/jet/codegen/VarArgTest.java b/compiler/tests/org/jetbrains/jet/codegen/VarArgTest.java
index e08b515..4a68f35 100644
--- a/compiler/tests/org/jetbrains/jet/codegen/VarArgTest.java
+++ b/compiler/tests/org/jetbrains/jet/codegen/VarArgTest.java
@@ -76,0 +77,4 @@
+
+    public void testKt797() {
+        blackBoxFile("regressions/kt796_797.jet");
+    }

