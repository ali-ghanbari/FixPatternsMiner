diff --git a/idea/src/org/jetbrains/jet/codegen/FunctionCodegen.java b/idea/src/org/jetbrains/jet/codegen/FunctionCodegen.java
index 711044a..342963f 100644
--- a/idea/src/org/jetbrains/jet/codegen/FunctionCodegen.java
+++ b/idea/src/org/jetbrains/jet/codegen/FunctionCodegen.java
@@ -72 +72 @@
-            if (expressionType.equals(JetStandardClasses.getUnitType())) {
+            if (expressionType == null || expressionType.equals(JetStandardClasses.getUnitType())) {

