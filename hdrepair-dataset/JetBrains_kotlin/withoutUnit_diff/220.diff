diff --git a/compiler/frontend/src/org/jetbrains/jet/lang/descriptors/FunctionDescriptorImpl.java b/compiler/frontend/src/org/jetbrains/jet/lang/descriptors/FunctionDescriptorImpl.java
index 70055e4..ef3ab5a 100644
--- a/compiler/frontend/src/org/jetbrains/jet/lang/descriptors/FunctionDescriptorImpl.java
+++ b/compiler/frontend/src/org/jetbrains/jet/lang/descriptors/FunctionDescriptorImpl.java
@@ -154 +154 @@
-            JetType substitutedType = substitutor.substitute(expectedThisObject.getType(), Variance.IN_VARIANCE);
+            JetType substitutedType = substitutor.substitute(expectedThisObject.getType(), Variance.INVARIANT);
diff --git a/idea/testData/checker/When.jet b/idea/testData/checker/When.jet
index 53177ae..a7bd2a8 100644
--- a/idea/testData/checker/When.jet
+++ b/idea/testData/checker/When.jet
@@ -0,0 +1,2 @@
+fun Int.foo() : Boolean = true
+
@@ -20 +22 @@
-      <error>.</error>equals(1) => 1
+      <error>.</error>foo() => 1

