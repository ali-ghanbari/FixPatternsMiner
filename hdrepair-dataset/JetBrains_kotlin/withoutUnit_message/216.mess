StackOverflow fixed in case of inner class

