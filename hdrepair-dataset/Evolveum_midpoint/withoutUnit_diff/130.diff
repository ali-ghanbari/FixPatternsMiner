diff --git a/gui/admin-gui/src/main/java/com/evolveum/midpoint/web/page/admin/users/PageUser.java b/gui/admin-gui/src/main/java/com/evolveum/midpoint/web/page/admin/users/PageUser.java
index a8f1a19..917234d 100644
--- a/gui/admin-gui/src/main/java/com/evolveum/midpoint/web/page/admin/users/PageUser.java
+++ b/gui/admin-gui/src/main/java/com/evolveum/midpoint/web/page/admin/users/PageUser.java
@@ -290 +290 @@
-    			if (delta.getObjectToAdd() != null && ResourceObjectShadowType.class.isAssignableFrom(delta.getObjectToAdd().getClass())){
+    			if (delta.getObjectToAdd() != null && ResourceObjectShadowType.class.isAssignableFrom(delta.getObjectToAdd().getCompileTimeClass())){

