fixing problem while assigning roles (and probably also MID-1686)

