diff --git a/plugins/groovy/src/org/jetbrains/plugins/groovy/lang/psi/impl/statements/GrVariableImpl.java b/plugins/groovy/src/org/jetbrains/plugins/groovy/lang/psi/impl/statements/GrVariableImpl.java
index cc22f31..6ff85e3 100644
--- a/plugins/groovy/src/org/jetbrains/plugins/groovy/lang/psi/impl/statements/GrVariableImpl.java
+++ b/plugins/groovy/src/org/jetbrains/plugins/groovy/lang/psi/impl/statements/GrVariableImpl.java
@@ -100,0 +101,2 @@
+              if (declaredClass == initializerClass) return initializerType;
+              
diff --git a/plugins/groovy/test/org/jetbrains/plugins/groovy/lang/resolve/TypeInferenceTest.java b/plugins/groovy/test/org/jetbrains/plugins/groovy/lang/resolve/TypeInferenceTest.java
index 20bfb59..7721517 100644
--- a/plugins/groovy/test/org/jetbrains/plugins/groovy/lang/resolve/TypeInferenceTest.java
+++ b/plugins/groovy/test/org/jetbrains/plugins/groovy/lang/resolve/TypeInferenceTest.java
@@ -65,0 +66,5 @@
+
+  public void testClosure2() throws Exception {
+    GrReferenceExpression ref = (GrReferenceExpression) configureByFile("closure2/A.groovy");
+    assertTrue(ref.getType().equalsToText("java.lang.Integer"));
+  }
diff --git a/plugins/groovy/testdata/resolve/inference/closure2/A.groovy b/plugins/groovy/testdata/resolve/inference/closure2/A.groovy
new file mode 100644
index 0000000..fe92c3b
--- /dev/null
+++ b/plugins/groovy/testdata/resolve/inference/closure2/A.groovy
@@ -0,0 +1,16 @@
+class A {
+    static def fact = {
+        int i ->
+        if (i > 1) {
+            return A.fact(i - 1)
+        } else {
+            return 1
+        }
+    }
+
+    public static void main(String[] args) {
+        Closure cl = A.fact
+        def var = cl(5)
+        println(<ref>var.intValue())
+    }
+}
\ No newline at end of file

