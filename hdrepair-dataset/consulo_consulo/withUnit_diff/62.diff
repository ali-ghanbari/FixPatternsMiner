diff --git a/plugins/maven/src/main/java/org/jetbrains/idea/maven/project/MavenProjectModel.java b/plugins/maven/src/main/java/org/jetbrains/idea/maven/project/MavenProjectModel.java
index bb035b0..087eacf 100644
--- a/plugins/maven/src/main/java/org/jetbrains/idea/maven/project/MavenProjectModel.java
+++ b/plugins/maven/src/main/java/org/jetbrains/idea/maven/project/MavenProjectModel.java
@@ -523 +523 @@
-      if (myMavenProjectHolder.getSortedProjects() == null) return new ArrayList<String>(paths);
+      if (myMavenProjectHolder.getSortedProjects().isEmpty()) return new ArrayList<String>(paths);
diff --git a/plugins/maven/src/test/java/org/jetbrains/idea/maven/InvalidProjectImportingTest.java b/plugins/maven/src/test/java/org/jetbrains/idea/maven/InvalidProjectImportingTest.java
index 17f7560..0f3e94b 100644
--- a/plugins/maven/src/test/java/org/jetbrains/idea/maven/InvalidProjectImportingTest.java
+++ b/plugins/maven/src/test/java/org/jetbrains/idea/maven/InvalidProjectImportingTest.java
@@ -315,0 +316,57 @@
+  public void testCircularDependencies() throws Exception {
+    createProjectPom("<groupId>test</groupId>" +
+                     "<artifactId>project</artifactId>" +
+                     "<packaging>pom</packaging>" +
+                     "<version>1</version>" +
+
+                     "<modules>" +
+                     "  <module>m1</module>" +
+                     "  <module>m2</module>" +
+                     "  <module>m3</module>" +
+                     "</modules>");
+
+    createModulePom("m1", "<groupId>test</groupId>" +
+                          "<artifactId>m1</artifactId>" +
+                          "<version>1</version>" +
+
+                          "<dependencies>" +
+                          "  <dependency>" +
+                          "    <groupId>test</groupId>" +
+                          "    <artifactId>m2</artifactId>" +
+                          "    <version>1</version>" +
+                          "  </dependency>" +
+                          "</dependencies>");
+
+    createModulePom("m2", "<groupId>test</groupId>" +
+                          "<artifactId>m2</artifactId>" +
+                          "<version>1</version>" +
+
+                          "<dependencies>" +
+                          "  <dependency>" +
+                          "    <groupId>test</groupId>" +
+                          "    <artifactId>m3</artifactId>" +
+                          "    <version>1</version>" +
+                          "  </dependency>" +
+                          "</dependencies>");
+
+    createModulePom("m3", "<groupId>test</groupId>" +
+                          "<artifactId>m3</artifactId>" +
+                          "<version>1</version>" +
+
+                          "<dependencies>" +
+                          "  <dependency>" +
+                          "    <groupId>test</groupId>" +
+                          "    <artifactId>m1</artifactId>" +
+                          "    <version>1</version>" +
+                          "  </dependency>" +
+                          "</dependencies>");
+
+    importProject();
+
+    MavenProjectModel.Node root = getRootProjects().get(0);
+    assertProblems(root);
+    assertProblems(root.getSubProjects().get(0));
+    assertProblems(root.getSubProjects().get(1));
+    assertProblems(root.getSubProjects().get(2));
+  }
+

