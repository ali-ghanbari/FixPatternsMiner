fix and tests for arrays' hashcode generation

