diff --git a/dom/openapi/src/com/intellij/util/xml/tree/DomModelTreeView.java b/dom/openapi/src/com/intellij/util/xml/tree/DomModelTreeView.java
index a67d80c..cc80c45 100644
--- a/dom/openapi/src/com/intellij/util/xml/tree/DomModelTreeView.java
+++ b/dom/openapi/src/com/intellij/util/xml/tree/DomModelTreeView.java
@@ -105 +105 @@
-    return myRootElement.isValid() && file.equals(myRootElement.getRoot().getFile().getVirtualFile());
+    return myRootElement == null || (myRootElement.isValid() && file.equals(myRootElement.getRoot().getFile().getVirtualFile()));

