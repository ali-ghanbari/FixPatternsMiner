diff --git a/lang-impl/src/com/intellij/util/indexing/FileBasedIndex.java b/lang-impl/src/com/intellij/util/indexing/FileBasedIndex.java
index 0d3a91b..a1329ce 100644
--- a/lang-impl/src/com/intellij/util/indexing/FileBasedIndex.java
+++ b/lang-impl/src/com/intellij/util/indexing/FileBasedIndex.java
@@ -1045 +1045 @@
-        if (!SingleRootFileViewProvider.isTooLarge(file)) {
+        if (file instanceof VirtualFileWithId && !SingleRootFileViewProvider.isTooLarge(file)) {

