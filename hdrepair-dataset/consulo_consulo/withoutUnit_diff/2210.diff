diff --git a/util/src/com/intellij/util/containers/FactoryMap.java b/util/src/com/intellij/util/containers/FactoryMap.java
index bedb15c..ea15128 100644
--- a/util/src/com/intellij/util/containers/FactoryMap.java
+++ b/util/src/com/intellij/util/containers/FactoryMap.java
@@ -50 +50 @@
-      put(key, value);
+      myMap.put(getKey(key), value == null ? (V)NULL : value);

