diff --git a/platform/lang-impl/src/com/intellij/psi/util/proximity/PsiProximityComparator.java b/platform/lang-impl/src/com/intellij/psi/util/proximity/PsiProximityComparator.java
index 91795f9..cc9a1bb 100644
--- a/platform/lang-impl/src/com/intellij/psi/util/proximity/PsiProximityComparator.java
+++ b/platform/lang-impl/src/com/intellij/psi/util/proximity/PsiProximityComparator.java
@@ -111 +111 @@
-    return WeighingService.weigh(WEIGHER_KEY, element, new ProximityLocation(context, contextModule, processingContext));
+    return WeighingService.weigh(WEIGHER_KEY, elementComputable, new ProximityLocation(context, contextModule, processingContext));

