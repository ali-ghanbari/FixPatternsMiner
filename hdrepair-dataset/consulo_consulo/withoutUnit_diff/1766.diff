diff --git a/platform-api/src/com/intellij/openapi/ui/ComponentWithBrowseButton.java b/platform-api/src/com/intellij/openapi/ui/ComponentWithBrowseButton.java
index bd0744f..585ff76 100644
--- a/platform-api/src/com/intellij/openapi/ui/ComponentWithBrowseButton.java
+++ b/platform-api/src/com/intellij/openapi/ui/ComponentWithBrowseButton.java
@@ -197,0 +198 @@
+      if (directoryName.length() == 0) return null;

