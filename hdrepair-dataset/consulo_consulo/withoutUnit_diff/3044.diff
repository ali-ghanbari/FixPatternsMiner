diff --git a/source/com/intellij/codeInsight/editorActions/TypedHandler.java b/source/com/intellij/codeInsight/editorActions/TypedHandler.java
index 8c6e1ac..1468293 100644
--- a/source/com/intellij/codeInsight/editorActions/TypedHandler.java
+++ b/source/com/intellij/codeInsight/editorActions/TypedHandler.java
@@ -282 +282 @@
-          if (StringEscapesTokenTypes.STRING_LITERAL_ESCAPES.isInSet( iterator.getTokenType() )) {
+          if (!iterator.atEnd() && StringEscapesTokenTypes.STRING_LITERAL_ESCAPES.isInSet( iterator.getTokenType() )) {

