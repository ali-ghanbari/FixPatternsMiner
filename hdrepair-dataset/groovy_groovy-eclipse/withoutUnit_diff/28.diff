diff --git a/base/org.eclipse.jdt.groovy.core/src/org/codehaus/jdt/groovy/internal/compiler/ast/JDTClassNodeBuilder.java b/base/org.eclipse.jdt.groovy.core/src/org/codehaus/jdt/groovy/internal/compiler/ast/JDTClassNodeBuilder.java
index cfb6ba2..f74f23c 100644
--- a/base/org.eclipse.jdt.groovy.core/src/org/codehaus/jdt/groovy/internal/compiler/ast/JDTClassNodeBuilder.java
+++ b/base/org.eclipse.jdt.groovy.core/src/org/codehaus/jdt/groovy/internal/compiler/ast/JDTClassNodeBuilder.java
@@ -118 +118,5 @@
-			return resolver.getScope().environment.convertToRawType(ptb.genericType(), false);
+			// resolver.getScope() can return null (if the resolver hasn't yet been used to resolve something) - using
+			// the environment on the ptb seems safe. Other occurrences of getScope in this file could feasibly
+			// be changed in the same way if NPEs become problems there too
+			return ptb.environment().convertToRawType(ptb.genericType(), false);
+			// return resolver.getScope().environment.convertToRawType(ptb.genericType(), false);

