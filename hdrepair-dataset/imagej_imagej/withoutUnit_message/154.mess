fix bug that hatched double windows when a plugin caused data to undergo a type change

This used to be revision r4173.

