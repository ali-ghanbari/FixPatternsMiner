backport fix for issue #4359

