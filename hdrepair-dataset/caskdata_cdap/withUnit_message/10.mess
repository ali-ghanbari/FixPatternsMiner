fix router rule; add unit test

