diff --git a/server/src/com/cloud/vm/MauriceMoss.java b/server/src/com/cloud/vm/MauriceMoss.java
index 6faed9b..503a97c 100644
--- a/server/src/com/cloud/vm/MauriceMoss.java
+++ b/server/src/com/cloud/vm/MauriceMoss.java
@@ -231 +231 @@
-        return (VirtualMachineGuru<T>)_vmGurus.get(vm);
+        return (VirtualMachineGuru<T>)_vmGurus.get(vm.getType());

