diff --git a/opennms-services/src/main/java/org/opennms/netmgt/linkd/DiscoveryLink.java b/opennms-services/src/main/java/org/opennms/netmgt/linkd/DiscoveryLink.java
index 6cc7ed8..62e2d04 100644
--- a/opennms-services/src/main/java/org/opennms/netmgt/linkd/DiscoveryLink.java
+++ b/opennms-services/src/main/java/org/opennms/netmgt/linkd/DiscoveryLink.java
@@ -476 +476 @@
-                    int designatedbridgeport = Integer.parseInt(stpPortDesignatedPort.substring(1),
+                    int designatedbridgeport = 8191 & Integer.parseInt(stpPortDesignatedPort,

